# TCP와 UDP 비교
<img width="2768" height="3337" alt="NotebookLM Mind Map (1)" src="https://github.com/user-attachments/assets/1e73c78e-06ee-41c6-b669-89bb9855d5cc" />

## 목차
- [TCP (Transmission Control Protocol)](#tcp-transmission-control-protocol)
  - [특징](#특징)
  - [오버헤드 및 단점](#오버헤드-및-단점)
  - [연결 및 해제 과정](#연결-및-해제-과정)
  - [응용 분야](#응용-분야)
- [UDP (User Datagram Protocol)](#udp-user-datagram-protocol)
  - [특징](#특징-1)
  - [장점](#장점)
  - [단점](#단점)
  - [응용 분야](#응용-분야-1)
- [TCP vs UDP 비교표](#tcp-vs-udp-비교표)

---

## TCP (Transmission Control Protocol)

**연결 지향형 프로토콜**로, 장치들 사이에 논리적인 접속을 성립하기 위해 연결을 설정한 후 데이터를 전송합니다.

### 특징

- **신뢰성 있는 데이터 전송 보장**: 데이터 패킷이 오류 없이, 순서대로, 그리고 정확하게 목적지에 전달되도록 보장합니다. 패킷이 손실되거나 손상되면 TCP는 재전송을 요청합니다.

- **정확성 우선**: UDP에 비해 시간이 더 소요되지만 정확합니다.

- **전이중(Full-Duplex) 통신**: 전송이 양방향으로 동시에 일어날 수 있으며, 각 연결이 정확히 2개의 종단점을 가지는 점대점(Point to Point) 방식입니다. 따라서 멀티캐스팅이나 브로드캐스팅은 지원하지 않습니다.

- **바이트 스트림 서비스**: 데이터의 경계를 구분하지 않습니다.
  > 마치 끊임없이 흐르는 강물처럼 취급합니다. 100바이트와 50바이트를 나누어 보냈지만 서버는 연속적인 150바이트의 데이터를 받게 됩니다. TCP는 데이터를 보낼 때 정확한 순서와 신뢰성을 보장하기 위해 데이터를 쪼개거나 합칠 수 있습니다.

- **세그먼트**: TCP 패킷은 세그먼트라고 부릅니다.

- **연결 설정**: 3-way handshake를 통해 연결을 설정해야 통신이 가능합니다.

- **헤더 크기**: 최소 20바이트 (오버헤드가 크고 느립니다)

#### 신뢰성 보장 메커니즘

1. **순서 보장**: 패킷이 서버와 클라이언트 간에 오류 없이, 그리고 올바른 순서로 전송되도록 보장합니다.
2. **재전송**: 패킷이 유실되거나 손상되면 TCP는 이를 재전송(retransmit)합니다.
3. **응답 확인**: 응답(ACK) 번호를 사용하여 패킷이 도착했는지 확인하며, 제대로 도착하지 않으면 재송신을 요구합니다.
4. **안정적 교환**: 네트워크에 연결된 컴퓨터에서 실행되는 프로그램 간에 데이터(옥텟 블록)를 안정적으로, 순서대로, 에러 없이 교환할 수 있게 합니다.

### 오버헤드 및 단점

- **헤더 크기 오버헤드**: 최소 20바이트의 헤더로 인한 오버헤드
- **지연시간**: 초기 handshake와 응답 과정이 지연 시간을 유발하여 실시간 애플리케이션에는 단점이 됩니다
- **자원 집약적**: TCP는 복잡성과 연결 상태(connection states)를 유지해야 하는 필요성 때문에 더 많은 시스템 자원이 필요합니다

### 연결 및 해제 과정

#### A. 3-way handshake (연결 설정)

3-way handshake는 클라이언트와 서버 간에 논리적인 연결을 설정하는 과정이며, 제어 비트 중 SYN과 ACK를 사용합니다.

1. 클라이언트가 **SYN** 패킷을 서버에 보내 연결을 요청합니다
2. 서버는 SYN 패킷을 받고 **SYN + ACK**를 클라이언트에게 보냅니다
3. 클라이언트가 SYN/ACK를 받고 서버에 **ACK**를 보내면 연결이 완료됩니다

> **중요**: 이 과정에서 시퀀스 번호 교환 및 최대 세그먼트 사이즈(MSS)와 혼잡 제어 정책 교환이 이루어집니다.

#### B. 4-way handshake (연결 해제)

4-way handshake는 TCP 연결을 종료하는 방식이며, 제어 비트 중 FIN과 ACK를 사용합니다.

1. 연결 종료를 원하는 측(클라이언트)이 **FIN** 플래그를 서버에 보냅니다
2. 서버는 FIN을 받고 **ACK**로 응답합니다
3. 서버도 종료 프로세스를 진행한 후 클라이언트에 **FIN**을 보냅니다
4. 클라이언트는 FIN을 받고 서버에 **ACK**를 전송하며, 일정 시간이 지나면 연결이 종료됩니다

### 응용 분야

정확성과 신뢰성이 필요한 애플리케이션에 사용합니다. TCP는 이러한 제어 기능들 덕분에 개발자가 데이터 유실에 대한 예외 처리를 직접 신경 쓰지 않고 상위 레이어의 동작에만 집중할 수 있게 해주는 이점을 제공합니다.

- **웹 브라우징**: HTTP 및 HTTPS는 TCP를 사용하여 웹 페이지가 정확하고 안전하게 로드되도록 보장합니다
- **파일 전송**: 파일 전송 프로토콜(FTP)과 같은 프로토콜은 파일이 오류 없이 전송되도록 보장하기 위해 TCP에 의존합니다
- **이메일 및 문자 메시지**: 서버와 클라이언트 간에 신뢰성 있는 데이터 전송이 요구되는 애플리케이션입니다
- **대용량 데이터 전송**: TCP는 대용량 데이터 전송이 필요한 애플리케이션에 적합합니다

---

## UDP (User Datagram Protocol)

**비연결형 프로토콜**로, 신뢰성보다는 속도에 우선순위를 두는 프로토콜입니다.

### 특징

- **비신뢰성**: 전달, 순서, 오류 검사를 보장하지 않습니다. 그 이유는 속도와 낮은 지연시간을 극대화하기 위함입니다.

- **빠른 속도**: 오버헤드가 적어 효율적이고 지연 시간이 최소화됩니다.

- **데이터그램**: UDP 패킷은 데이터그램이라고 부릅니다.

- **메시지 스트림**: 데이터의 경계를 구분합니다.
  > 택배를 보낼 때 물건을 박스 단위로 포장해서 보내는 것처럼, 메시지 단위로 송수신을 처리하고 이 단위 그대로 수신측 애플리케이션에 전달합니다. 이를 통해 속도와 효율성을 극대화합니다.

- **제어 기능 미지원**: 흐름 제어, 혼잡 제어, 오류 검사를 지원하지 않습니다.

#### 제어 기능 비교

##### 1. 흐름 제어 (Flow Control): '받을 준비가 되었는지' 확인

**UDP (흐름 제어 없음)**:
- 송신 측이 감당이 안될만큼 많은 데이터를 빠르게 보내도 수신 측은 이를 알리지 못합니다
- 수신 측의 버퍼(데이터 임시 저장 공간)이 꽉 차서 넘쳐버리면 도착한 데이터는 담을 공간이 없어 폐기됩니다

**TCP (흐름 제어 있음)**:
- 데이터 전송하기 전에 연결을 설정하면 수신 측은 자신이 처리할 수 있는 데이터의 양을 송신 측에 알려줍니다
- 데이터 손실 없이 안정적으로 통신을 지속할 수 있습니다

##### 2. 혼잡 제어 (Congestion Control): '네트워크 상황'을 고려

**UDP (혼잡 제어 없음)**:
- 네트워크가 혼잡하든 말든 신경쓰지 않아 전송률을 조정하지 않습니다
- 최대한 빨리 보내는 것에만 집중하여 전송 통로가 혼잡해지면 UDP 패킷이 너무 많이 몰려서 대량의 패킷 손실이 발생할 수 있습니다

**TCP (혼잡 제어 있음)**:
- 서버와 클라이언트가 통신하는 도중 네트워크 혼잡 상황을 감지하고 이에 맞춰서 전송 속도를 조절합니다
- 정보 소통량이 과다하면 패킷을 조금만 전송하여 네트워크가 완전히 마비되는 혼잡 붕괴 현상이 일어나는 것을 막습니다

##### 3. 오류 검사 및 재전송 (Error Checking/Retransmission): '누락 확인'

**UDP (오류 검사 및 재전송 없음)**:
- 패킷이 중간에 유실되거나, 오류가 발생하더라도 UDP 프로토콜 자체에는 이를 감지하거나 수정하는 메커니즘이 없습니다
- 송신 측은 전송이 성공했는지 알 수 없으며, 데이터는 비신뢰성 있게 전송됩니다

**TCP (오류 검사 및 재전송 있음)**:
- 패킷이 전송되는 도중 오류가 발생하거나 손실되면, TCP는 재전송을 요청합니다
- 응답(ACK) 번호를 사용하여 패킷이 제대로 도착했는지 확인하고, 도착하지 않았으면 재송신을 요구합니다
- 이 과정을 통해 TCP는 데이터가 순서대로, 에러 없이 전달되는 신뢰성 있는 데이터 전송을 보장합니다

- **헤더 크기**: 최소 8바이트의 단순한 고정 크기 헤더 (송신자와 수신자의 포트 번호, 데이터의 길이, 체크섬 등의 최소 정보만을 포함합니다. 수신자가 데이터를 받는지 여부에 관심이 없기에 이처럼 간단합니다)

### 장점

- **낮은 지연 시간**: 연결 설정이나 응답 과정이 없기 때문에 지연 시간 최소화
- **효율성**: 오버헤드가 적어 데이터를 더 빠르고 효율적으로 전송할 수 있습니다
  > **오버헤드란?** 실제 전송하고자 하는 데이터를 성공적으로 전달하고 처리하기 위해 추가적으로 소모되는 자원(용량)이나 시간, 그리고 불필요한 처리과정입니다.
- **멀티캐스트 및 브로드캐스트 지원**: UDP는 데이터를 여러 수신자에게 동시에 보낼 수 있어 (일 대 다 통신), 라이브 스트리밍 및 온라인 게임과 같은 애플리케이션에 이상적입니다

### 단점

- **비신뢰성**: 데이터 패킷이 목적지에 도달하거나 올바른 순서로 도착하는 것을 보장하지 않습니다
- **오류 제어 부재**: 전송된 데이터의 오류를 감지하거나 수정하는 메커니즘이 없습니다
- **혼잡 제어 부재**: 네트워크 상태에 따라 전송률을 조정하지 않아 혼잡 시 패킷 손실이 발생할 수 있습니다. 서버가 데이터를 받을 수 없는 상황이어도 클라이언트는 이를 알 수 없습니다

### 응용 분야

신뢰성이나 데이터 무결성보다 속도와 낮은 지연 시간이 중요한 **실시간 애플리케이션**에 주로 사용됩니다.

- **라이브 스트리밍**: YouTube Live나 Twitch와 같은 애플리케이션은 지연 시간을 최소화하고 원활한 스트리밍을 보장하기 위해 UDP를 사용합니다. 동영상 스트리밍의 경우, 일부 패킷이 손실되더라도 다음 조각으로 넘어가기 때문에 사용자는 끊김 없이 시청할 수 있습니다

- **온라인 게임**: Fortnite, Call of Duty와 같은 게임은 최소한의 지연으로 실시간 상호 작용을 제공하기 위해 UDP를 사용합니다. TCP의 순서 보장 및 재전송 특성은 실시간 게임에서 게임을 멈추게 하는 방해 요소가 될 수 있으므로, 현업에서는 UDP에 TCP와 같은 기능을 추가하여 사용하는 경우도 있습니다 (예: RUDP)

- **VoIP 및 화상 회의**: Skype나 Zoom과 같은 서비스는 실시간 통신을 촉진하기 위해 UDP를 사용합니다. 이 경우 약간의 데이터 손실은 허용될 수 있습니다

- **DNS (Domain Name System)**: DNS는 일반적으로 작고 간단한 쿼리에 대해 더 빠르고 효율적인 UDP를 주로 사용합니다. 다만, 더 큰 응답이 필요하거나 신뢰성이 중요한 경우 (예: DNS 서버 간의 영역 전송)에는 TCP로 대체될 수 있습니다

> **결론**: 속도가 매우 중요하고 실시간성이 핵심인 영역에서 UDP를 사용합니다.

---

## TCP vs UDP 비교표

| 특징 | TCP | UDP |
|------|-----|-----|
| **연결 방식** | 연결 지향형 | 비연결형 |
| **신뢰성** | 보장 (재전송, 순서 보장) | 보장하지 않음 |
| **속도** | 느림 (오버헤드 큼) | 빠름 (오버헤드 적음) |
| **헤더 크기** | 20바이트 | 8바이트 |
| **흐름 제어** | 지원 | 미지원 |
| **혼잡 제어** | 지원 | 미지원 |
| **오류 검사** | 지원 | 미지원 |
| **연결 설정** | 3-way handshake 필요 | 불필요 |
| **멀티캐스트** | 미지원 | 지원 |
| **패킷 명칭** | 세그먼트 | 데이터그램 |
| **데이터 스트림** | 바이트 스트림 | 메시지 스트림 |

### 언제 어떤 프로토콜을 사용할까?

#### TCP 사용 시기
- 정확하고 완벽한 데이터 전송이 필요한 경우
- 파일 전송, 이메일, 웹 브라우징
- 연결 지향형 프로토콜이며, 연결을 확인하고 데이터를 안정적으로, 순서대로, 에러 없이 교환하여 신뢰성을 보장

#### UDP 사용 시기
- 속도가 중요하고 일부 데이터 손실이 허용되는 경우
- 라이브 스트리밍, 온라인 게임, VoIP
- 비연결 지향형 프로토콜이며, 연결 설정을 하지 않고, 응답을 받지 않고도 계속해서 데이터를 전송하여 속도를 극대화
